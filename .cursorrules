# Monorepo MF Example - Cursor Rules

## Overview
This project is a micro-frontend system based on Rspack + Module Federation using pnpm workspaces.

## Architecture
- Shell (HOST) - localhost:3000: Main application, manages router instance
- Platform (REMOTE) - localhost:3001: Shared services (QueryClient, Account)
- Domain remotes: traffic, reports, admin (and newly created ones)

## Key Rules

### Router
- ONLY shell creates TanStack Router instance
- Domain remotes DO NOT create routers, only export route config

### Frame Ownership
- Shell renders Header/Sidebar/Layout exactly once
- Domain remotes DO NOT create their own global frame

### Module Federation
- All applications share these singletons:
  - react, react-dom, @tanstack/react-query, @tanstack/react-router

### Tailwind CSS v4
- Global CSS should contain ONLY: @import "tailwindcss";
- DO NOT use @tailwind base/components/utilities

### Platform
- QueryClient singleton is provided by platform
- Account data is fetched once and shared via TanStack Query cache

### New Domain Creation
- New domains are created with pnpm domain:create command
- Script automatically updates shell
